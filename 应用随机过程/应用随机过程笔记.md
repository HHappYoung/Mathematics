# 0. Preliminaries

## 0.1 

Let $\Omega$ be a nonempty set which serves as the sample space, and let $2^{\Omega}$ denote the set of all subsets of $\Omega$. 

<font color=red>定义（代数）:</font> A non-empty $\mathbb{A} \subset 2^{\Omega}$ is called an algebra if it is closed under finite unions and complementations（补集）; an algebra $\mathscr{B}$ closed under countable unions is called a $\sigma$-algebra (or $\sigma$-field in some literature). If $\mathbb{A}$ is an algebra on $\Omega$ we have $\emptyset, \Omega \in \mathbb{A}$.

一个代数是一个事件集合，它满足以下条件：

1. 包含空集和全集。
2. 对有限个事件的并集封闭。
3. 对事件的补集封闭。

一个 $\sigma$-代数是一个代数，并且对可数个事件的并集封闭。代数和 $\sigma$-代数的区别在于是否对可数个事件的并集封闭。代数只要求对有限个事件的并集封闭，而 σ*σ*-代数则要求对可数个事件的并集封闭。



For $G \subset 2^{\Omega}$, we denote by $\sigma(G)$ the $\sigma$-algebra generated by $G$. It is the smallest $\sigma$-algebra containing $G$. For example, if $G=\{A\}$ then $\sigma(G)=\left\{\emptyset, A, A^c, \Omega\right\}$. When $\Omega$ is a topological space, by $\mathscr{B}(\Omega)$ we usually means the Borel $\sigma$-algebra of $\Omega$, which is generated by all the open sets of the topological space $\Omega$. For example, the $n$-dimensional Borel $\sigma$-field $\mathscr{B}_{\mathbb{R}^n}$.

<font color=red>0.1.1 Def</font>  

1. A pair $(\Omega, \mathscr{B})$, where $\mathscr{B}$ is a $\sigma$-algebra on $\Omega$, is called a <font color=red>measurable space</font> (or an event space). $A \subset \Omega$ is called <font color=red>measurable</font> (an event) if $A \in \mathscr{B}$.

2. Let $A_n, n=1,2, \ldots$ be a sequence of events; then $\left\{A_n\right.$ i.o. $\}=\limsup _{n \rightarrow \infty} A_n=\bigcap_{n=1}^{\infty} \bigcup_{k \geq n} A_k$.
3. $\mathfrak{M} \subset 2^{\Omega}$ is called a monotone class if $A_n \in \mathfrak{M}, n=1,2, \ldots$, and $\left\{A_n\right\}$ monotone (i.e. $A_n \uparrow A$ or $A_n \downarrow A$ ) implies $\lim _n A_n \in \mathfrak{M}$. If in addition $\mathfrak{M}$ is an algebra, then it is a $\sigma$-algebra by the following lemma.

We have the following lemma.
<font color=blue>0.1.2 Lemma (Halmos' monotone-class lemma)</font>. If $\mathfrak{M}$ is a monotone class containing an algebra $\mathbb{A}$ on $\Omega$, then $\sigma(\mathbb{A}) \subseteq \mathfrak{M}$. Hence $\sigma(\mathbb{A})=\mathfrak{M}(\mathbb{A})$.

Proof. Let $\mathfrak{M}$ be the monotone class generated by $\mathbb{A}$. It is sufficient to prove that $\mathfrak{M}$ is an algebra. Clearly $\Omega \in \mathfrak{M}$.

Let $\mathfrak{M}_1=\left\{A: A^c \in \mathfrak{M}\right\}$. It is easy to see that $\mathbb{A} \subseteq \mathfrak{M}_1$ and $\mathfrak{M}_1$ is a monotone class. By $\mathfrak{M} \subseteq \mathfrak{M}_1$ we see that $A^c \in \mathfrak{M}$ for all $A \in \mathfrak{M}$.



## 0.2 概率空间和积分

<font color=red>定义（概率空间）：</font>Let $(\Omega, \mathscr{B})$ be a measurable space. A function $P: \mathscr{B} \rightarrow \mathbb{R}$ such that
(1) $P(\Omega)=1$ and $0 \leq P(A) \leq 1$ for all $A \in \mathscr{B}$;
(2) $P\left(\sum_{n=1}^{\infty} A_n\right)=\sum_{n=1}^{\infty} P\left(A_n\right)$ whenever $A_n \in \mathscr{B}, n=1,2, \ldots$, are pairwise disjoint ( $\sigma$-additivity),
is called a probability on $\mathscr{B}$. The triple $(\Omega, \mathscr{B}, P)$ is called a probability space.

Comparing with the regularity on p. 4 we have the following:
0.2.1 Theorem. Let $(\Omega, \mathscr{B}, P)$ be a probability space and let $\mathcal{A}$ be an algebra of subsets of $\Omega$ with $\sigma(\mathcal{A})=\mathscr{B}$. Then for each $\varepsilon>0$ and $B \in \mathscr{B}$, there exists some $A \in \mathcal{A}$ with $P(A \Delta B)<\varepsilon$.

The following two formulas are useful for calculations.
0.2.2 Exercise. Let $(\Omega, \mathscr{B}, P)$ be a probability space and $A_1, \ldots, A_n \in \mathscr{B}$.
(1) (Inclusion-exclusion formula).

$$
P\left(A_1 \cup \cdots \cup A_n\right)=\sum_i P\left(A_i\right)-\sum_{i<j} P\left(A_i \cap A_j\right)+\sum_{i<j<k} P\left(A_i \cap A_j \cap A_k\right)-\cdots
$$

(2) (Dual inclusion-exclusion formula).

$$
P\left(A_1 \cap \cdots \cap A_n\right)=\sum_i P\left(A_i\right)-\sum_{i<j} P\left(A_i \cup A_j\right)+\sum_{i<j<k} P\left(A_i \cup A_j \cup A_k\right)-\cdots
$$


Recall that a real-valued measurable function on $(\Omega, \mathscr{B}, P)$ is called a random variable. A system $X=\left(x_t\right)_{t \in T}$ of random variables $x_t: \Omega \rightarrow \mathbb{R}$, where $T$ being some time-indexing set, is called a stochastic process. Here for a fixed $\omega \in \Omega, x_t(\omega)$ is a function on $T$, called a sample function (or path, trajectory) of the process $X$.

Note here that we do not care the regularity of $x_t(\omega)$ with respect to $t$.
Similarly, we can define $n$-dimensional random variable and $n$-dimensional stochastic process.
Here is an important concept.





### Lebesgue integral

Let $f$ be a random variable on $(\Omega, \mathscr{B}, P)$ and $A \in \mathscr{B}$. We say $f$ is $P$-integrable restricted to $A$, provided that there exist the following limits:
$$
\left(\mathrm{E}\left[f^{+} 1_A\right]:=\right) \lim _{n \rightarrow \infty} \sum_{k=0}^{\infty} \frac{k}{n} P(\{\omega \in A \mid k / n \leq f(\omega)<(k+1) / n\})
$$

and

$$
\left(\mathrm{E}\left[f^{-} 1_A\right]:=\right) \lim _{n \rightarrow \infty} \sum_{k=0}^{\infty} \frac{k}{n} P(\{\omega \in A \mid k / n \leq-f(\omega)<(k+1) / n\})
$$


The difference of the above two limits is called the Lebesgue integral or expectation of $f$ restricted to $A$, written as

$$
\mathrm{E}\left[f 1_A\right] \text { or } \int_A f(\omega) P(d \omega) .
$$


So, if $f$ is $P$-integrable restricted to $A$, then $\mathrm{E}\left[f 1_A\right]=\mathrm{E}\left[f^{+} 1_A\right]-\mathrm{E}\left[f^{-} 1_A\right]$. We will simply write $\mathrm{E}\left[f 1_{\Omega}\right]=\mathrm{E}[f]$. If $f$ is $P$-integrable on $\Omega$, we write $f \in L^1(\Omega, \mathscr{B}, P)$ or $f \in L^1(P)$.

We assume that the readers are familiar to the basic properties of Lebesgue integral; in particular, the following convergence theorems:

0.2.5 Theorem (Fatou's lemma). Let $\left\{f_n\right\}_1^{\infty}$ be a sequence of measurable functions on $(\Omega, \mathscr{B}, P)$ bounded below; i.e., $g \leq f_n$ a.e. $(P)$ for some $P$-integrable function $g$. Then

$$
\int \liminf _{n \rightarrow \infty} f_n(\omega) P(d \omega) \leq \liminf _{n \rightarrow \infty} \int f_n(\omega) P(d \omega)
$$


We note here that there exists a similar key inequality for lim sup instead of $\leq$ by $\geq$.
0.2.6 Theorem (Levi's monotone convergence theorem). Let $\left\{f_n\right\}$ be a sequence of nonnegative measurable functions on $(\Omega, \mathscr{B}, P)$ such that $f_n(\omega) \uparrow f(\omega)$ a.e. $(P)$. Then

$$
\int f(\omega) P(d \omega)=\lim _{n \rightarrow \infty} \int f_n(\omega) P(d \omega)
$$


We are now ready to state the basic condition that allows us to interchange the integral and limit signs. The following is a key result in analysis, which implies the continuity of probability.
0.2.7 Theorem (Lebesgue dominated convergence theorem). Let $g$ be $P$-integrable and suppose that $\left\{f_n\right\}$ is a sequence of measurable functions on $(\Omega, \mathscr{B}, P)$ such that $\left|f_n(\omega)\right| \leq g(\omega)$ and $f_n(\omega) \rightarrow f(\omega)$ a.e. $(P)$. Then

$$
\int f(\omega) P(d \omega)=\lim _{n \rightarrow \infty} \int f_n(\omega) P(d \omega)
$$




## 0.4 条件期望



<font color=red>定义0.4.1（条件期望）：</font> Here the class $\varphi$ is called the conditional expectation of $x$ given $\mathscr{C}$, denoted $\mathrm{E}[x \mid \mathscr{C}]$. Sometimes, write $P(A \mid \mathscr{C})=\mathrm{E}\left[1_A \mid \mathscr{C}\right]$ for $A \in \mathscr{B}$ and $\mathrm{E}[x \mid y]=\mathrm{E}[x \mid \sigma(y)]$ for two random variables $x, y$ with $x \in L^1(\Omega, \mathscr{B}, P)$.

It should be noted that the conditional expectation is not an explicit random variable but a set of random variables which are equal to each other except for a set of $P$-measure zero. Each of these variables is called a version of $\mathrm{E}[x \mid \mathscr{C}]$. In fact, it is very convenient to think of $\mathrm{E}[x \mid \mathscr{C}]$ as a version. Moreover,
- A random variable $\xi$ on $(\Omega, \mathscr{B}, P)$ is a version of $\mathrm{E}[x \mid \mathscr{C}]$ if and only if $\xi \in L^1(\Omega, \mathscr{C}, P)$ such that $\int_C x d P=\int_C \xi d P$ for all $C \in \mathscr{C}$.

Example 1. For $x \in L^1(\Omega, \mathscr{B}, P), \mathrm{E}[x \mid \mathscr{B}]=x$ and $\mathrm{E}[x \mid\{\emptyset, \Omega\}]=\mathrm{E}[x]$. (If $\xi \in L^1(\Omega, \mathscr{B}, P)$ s.t. $\sigma(\xi)=\{\emptyset, \Omega\}$ then $\xi \sim \delta_c$ with $\left.c=\mathrm{E}[\xi].\right)$
Example 2. For $A, B \in \mathscr{B}$ with $0<P(B)<1$,

$$
\begin{aligned}
\mathrm{E}[A \mid B]:=\mathrm{E}\left[1_A \mid\left\{\emptyset, B, B^c, \Omega\right\}\right] & = \begin{cases}P(A \mid B) & \text { if } \omega \in B \\
P\left(A \mid B^c\right) & \text { if } \omega \notin B\end{cases} \\
& =1_B P(A \mid B)+1_{B^c} P\left(A \mid B^c\right)
\end{aligned}
$$


More generally, if $\mathcal{P}=\left\{P_1, P_2, \ldots, P_n, \ldots\right\}$ is a measurable partition of $\Omega$. Then

$$
\mathrm{E}[A \mid \mathcal{P}]=\sum_i 1_{P_i} P\left(A \mid P_i\right)
$$


In particular, for $Y: \Omega \rightarrow \mathbb{Z}$ and $A \in \mathscr{B}$, we have

$$
\mathrm{E}[A \mid Y]=\sum_k P(A \mid Y=k) 1_{\{Y=k\}}
$$
